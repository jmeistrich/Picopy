function addScript(c,a){var g=document.createElement("script");g.type="text/javascript";g.async=!0;g.src=c;a&&(g.onloadDone=!1,g.onload=function(){g.onloadDone=!0;a&&a()},g.onReadystatechange=function(){"loaded"===g.readyState&&!g.onloadDone&&(g.onloadDone=!0,a&&a())});"undefined"!==typeof g&&document.getElementsByTagName("head")[0].appendChild(g)}
function getHashByName(c){for(var a=location.hash.substring(1),g=/([^&=]+)=([^&]*)/g,o;o=g.exec(a);)if(decodeURIComponent(o[1])==c)return decodeURIComponent(o[2])}function transitionDiv(c,a,g){$("#"+c).fadeOut("fast",function(){$("#"+a).fadeIn("fast",function(){g&&g()})})};jQuery.cookie=function(c,a,g){if("undefined"!=typeof a){g=g||{};null===a&&(a="",g.expires=-1);var o="";if(g.expires&&("number"==typeof g.expires||g.expires.toUTCString))"number"==typeof g.expires?(o=new Date,o.setTime(o.getTime()+864E5*g.expires)):o=g.expires,o="; expires="+o.toUTCString();var q=g.path?"; path="+g.path:"",p=g.domain?"; domain="+g.domain:"",g=g.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(a),o,q,p,g].join("")}else{a=null;if(document.cookie&&""!=document.cookie){g=
document.cookie.split(";");for(o=0;o<g.length;o++)if(q=jQuery.trim(g[o]),q.substring(0,c.length+1)==c+"="){a=decodeURIComponent(q.substring(c.length+1));break}}return a}};(function(c,a){function g(d,b,i){var e=j[b.type]||{};if((b.empty||i)&&null==d)return null;if(b.def&&null==d)return b.def;d=e.floor?~~d:parseFloat(d);return null==d||isNaN(d)?b.def:e.mod?(d%=e.mod,0>d?e.mod+d:d):e.min>d?e.min:e.max<d?e.max:d}function o(d,b,i){i=(i+1)%1;return 1>6*i?d+6*(b-d)*i:1>2*i?b:2>3*i?d+6*(b-d)*(2/3-i):d}var q=/^([\-+])=\s*(\d+\.?\d*)/,p=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},
{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return[2.55*d[1],2.55*d[2],2.55*d[3],d[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],h=c.Color=function(d,b,i,e){return new c.Color.fn.parse(d,b,i,e)},f={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},j={"byte":{floor:!0,min:0,max:255},percent:{min:0,
max:1},degrees:{mod:360,floor:!0}},n=f.rgba.props,l=h.support={},k,m=c.each;f.hsla.props.alpha=n.alpha;h.fn=h.prototype={constructor:h,parse:function(d,b,i,e){if(d===a)return this._rgba=[null,null,null,null],this;if(d instanceof c||d.nodeType)d=d instanceof c?d.css(b):c(d).css(b),b=a;var j=this,l=c.type(d),r=this._rgba=[];b!==a&&(d=[d,b,i,e],l="array");if("string"===l){d=d.toLowerCase();m(p,function(b,e){var i=e.re.exec(d),a=i&&e.parse(i),c=e.space||"rgba",i=f[c].cache;if(a){a=j[c](a);j[i]=a[i];r=
j._rgba=a._rgba;return false}});if(0!==r.length)return 0===Math.max.apply(Math,r)&&c.extend(r,k.transparent),this;d=k[d]||k._default;return this.parse(d)}if("array"===l)return m(n,function(b,e){r[e.idx]=g(d[e.idx],e)}),this;if("object"===l)return d instanceof h?m(f,function(b,e){d[e.cache]&&(j[e.cache]=d[e.cache].slice())}):m(f,function(b,e){m(e.props,function(b,i){var a=e.cache;if(!j[a]&&e.to){if(d[b]==null||b==="alpha")return;j[a]=e.to(j._rgba)}j[a][i.idx]=g(d[b],i,true)})}),this},is:function(d){var b=
h(d),i=!0,e=this;m(f,function(d,a){var j=b[a.cache],c;j&&(c=e[a.cache]||a.to&&a.to(e._rgba)||[],m(a.props,function(b,e){if(null!=j[e.idx])return i=j[e.idx]==c[e.idx]}));return i});return i},_space:function(){var d=[],b=this;m(f,function(i,e){b[e.cache]&&d.push(i)});return d.pop()},transition:function(d,b){var i=h(d),e=i._space(),a=f[e],c=this[a.cache]||a.to(this._rgba),n=c.slice(),i=i[a.cache];m(a.props,function(e,d){var a=d.idx,f=c[a],l=i[a],h=j[d.type]||{};null!==l&&(null===f?n[a]=l:(h.mod&&(l-
f>h.mod/2?f+=h.mod:f-l>h.mod/2&&(f-=h.mod)),n[d.idx]=g((l-f)*b+f,d)))});return this[e](n)},blend:function(d){if(1===this._rgba[3])return this;var b=this._rgba.slice(),i=b.pop(),e=h(d)._rgba;return h(c.map(b,function(b,d){return(1-i)*e[d]+i*b}))},toRgbaString:function(){var d="rgba(",b=c.map(this._rgba,function(b,e){return null==b?2<e?1:0:b});1===b[3]&&(b.pop(),d="rgb(");return d+b.join(",")+")"},toHslaString:function(){var d="hsla(",b=c.map(this.hsla(),function(b,e){null==b&&(b=2<e?1:0);e&&3>e&&(b=
Math.round(100*b)+"%");return b});1==b[3]&&(b.pop(),d="hsl(");return d+b.join(",")+")"},toHexString:function(d){var b=this._rgba.slice(),i=b.pop();d&&b.push(~~(255*i));return"#"+c.map(b,function(b){b=(b||0).toString(16);return 1==b.length?"0"+b:b}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}};h.fn.parse.prototype=h.fn;f.hsla.to=function(d){if(null==d[0]||null==d[1]||null==d[2])return[null,null,null,d[3]];var b=d[0]/255,i=d[1]/255,e=d[2]/255,d=d[3],a=Math.max(b,
i,e),j=Math.min(b,i,e),c=a-j,n=a+j,f=0.5*n;return[Math.round(j===a?0:b===a?60*(i-e)/c+360:i===a?60*(e-b)/c+120:60*(b-i)/c+240)%360,0===f||1===f?f:0.5>=f?c/n:c/(2-n),f,null==d?1:d]};f.hsla.from=function(d){if(null==d[0]||null==d[1]||null==d[2])return[null,null,null,d[3]];var b=d[0]/360,i=d[1],e=d[2],d=d[3],i=0.5>=e?e*(1+i):e+i-e*i,e=2*e-i;return[Math.round(255*o(e,i,b+1/3)),Math.round(255*o(e,i,b)),Math.round(255*o(e,i,b-1/3)),d]};m(f,function(d,b){var i=b.props,e=b.cache,j=b.to,n=b.from;h.fn[d]=function(b){j&&
!this[e]&&(this[e]=j(this._rgba));if(b===a)return this[e].slice();var d=c.type(b),f="array"===d||"object"===d?b:arguments,l=this[e].slice(),k;m(i,function(b,e){var i=f["object"===d?b:e.idx];null==i&&(i=l[e.idx]);l[e.idx]=g(i,e)});return n?(k=h(n(l)),k[e]=l,k):h(l)};m(i,function(b,e){h.fn[b]||(h.fn[b]=function(i){var a=c.type(i),j="alpha"===b?this._hsla?"hsla":"rgba":d,n=this[j](),f=n[e.idx];if("undefined"===a)return f;"function"===a&&(i=i.call(this,f),a=c.type(i));if(null==i&&e.empty)return this;
"string"===a&&(a=q.exec(i))&&(i=f+parseFloat(a[2])*("+"===a[1]?1:-1));n[e.idx]=i;return this[j](n)})})});m("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(a,b){c.cssHooks[b]={set:function(i,e){e=h(e);if(!l.rgba&&e._rgba[3]!==1){var a,d=b==="backgroundColor"?i.parentNode:i;do a=c.curCSS(d,"backgroundColor");while((a===""||a==="transparent")&&(d=d.parentNode)&&d.style);e=e.blend(a&&a!=="transparent"?a:"_default")}e=e.toRgbaString();
i.style[b]=e}};c.fx.step[b]=function(a){if(!a.colorInit){a.start=h(a.elem,b);a.end=h(a.end);a.colorInit=true}c.cssHooks[b].set(a.elem,a.start.transition(a.end,a.pos))}});c(function(){var a=document.createElement("div").style;a.cssText="background-color:rgba(1,1,1,.5)";l.rgba=-1<a.backgroundColor.indexOf("rgba")});k=c.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",
darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",
violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(c){function a(b){var a=["Moz","Webkit","O","ms"],e=b.charAt(0).toUpperCase()+b.substr(1);if(b in l.style)return b;for(b=0;b<a.length;++b){var d=a[b]+e;if(d in l.style)return d}}function g(b){"string"===typeof b&&this.parse(b);return this}function o(b,a,e){!0===a?b.queue(e):a?b.queue(a,e):e()}function q(b){var a=[];c.each(b,function(b){b=c.camelCase(b);b=c.transit.propertyMap[b]||b;b=f(b);-1===c.inArray(b,a)&&a.push(b)});return a}function p(b,a,e,d){b=q(b);c.cssEase[e]&&(e=c.cssEase[e]);
var j=""+n(a)+" "+e;0<parseInt(d,10)&&(j+=" "+n(d));var f=[];c.each(b,function(b,a){f.push(a+" "+j)});return f.join(", ")}function h(b,a){a||(c.cssNumber[b]=!0);c.transit.propertyMap[b]=k.transform;c.cssHooks[b]={get:function(a){return(c(a).css("transform")||new g).get(b)},set:function(a,d){var i=c(a).css("transform")||new g;i.setFromString(b,d);c(a).css({transform:i})}}}function f(b){return b.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function j(b,a){return"string"===typeof b&&!b.match(/^[\-0-9\.]+$/)?
b:""+b+a}function n(b){c.fx.speeds[b]&&(b=c.fx.speeds[b]);return j(b,"ms")}c.transit={version:"0.1.3",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),k={},m=-1<navigator.userAgent.toLowerCase().indexOf("chrome");k.transition=a("transition");k.transitionDelay=a("transitionDelay");k.transform=a("transform");
k.transformOrigin=a("transformOrigin");l.style[k.transform]="";l.style[k.transform]="rotateY(90deg)";k.transform3d=""!==l.style[k.transform];c.extend(c.support,k);var d=k.transitionEnd={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[k.transition]||null,l=null;c.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"};c.cssHooks.transform={get:function(b){return c(b).data("transform")},
set:function(b,a){var e=a;e instanceof g||(e=new g(e));b.style[k.transform]="WebkitTransform"===k.transform&&!m?e.toString(!0):e.toString();c(b).data("transform",e)}};c.cssHooks.transformOrigin={get:function(b){return b.style[k.transformOrigin]},set:function(b,a){b.style[k.transformOrigin]=a}};h("scale");h("translate");h("rotate");h("rotateX");h("rotateY");h("rotate3d");h("perspective");h("skewX");h("skewY");h("x",!0);h("y",!0);g.prototype={setFromString:function(b,a){var e="string"===typeof a?a.split(","):
a.constructor===Array?a:[a];e.unshift(b);g.prototype.set.apply(this,e)},set:function(b){var a=Array.prototype.slice.apply(arguments,[1]);this.setter[b]?this.setter[b].apply(this,a):this[b]=a.join(",")},get:function(b){return this.getter[b]?this.getter[b].apply(this):this[b]||0},setter:{rotate:function(b){this.rotate=j(b,"deg")},rotateX:function(b){this.rotateX=j(b,"deg")},rotateY:function(b){this.rotateY=j(b,"deg")},scale:function(b,a){void 0===a&&(a=b);this.scale=b+","+a},skewX:function(b){this.skewX=
j(b,"deg")},skewY:function(b){this.skewY=j(b,"deg")},perspective:function(b){this.perspective=j(b,"px")},x:function(b){this.set("translate",b,null)},y:function(b){this.set("translate",null,b)},translate:function(b,a){void 0===this._translateX&&(this._translateX=0);void 0===this._translateY&&(this._translateY=0);null!==b&&(this._translateX=j(b,"px"));null!==a&&(this._translateY=j(a,"px"));this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||
0},scale:function(){var b=(this.scale||"1,1").split(",");b[0]&&(b[0]=parseFloat(b[0]));b[1]&&(b[1]=parseFloat(b[1]));return b[0]===b[1]?b[0]:b},rotate3d:function(){for(var b=(this.rotate3d||"0,0,0,0deg").split(","),a=0;3>=a;++a)b[a]&&(b[a]=parseFloat(b[a]));b[3]&&(b[3]=j(b[3],"deg"));return b}},parse:function(b){var a=this;b.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(b,d,j){a.setFromString(d,j)})},toString:function(b){var a=[],e;for(e in this)if(this.hasOwnProperty(e)&&(k.transform3d||!("rotateX"===
e||"rotateY"===e||"perspective"===e||"transformOrigin"===e)))"_"!==e[0]&&(b&&"scale"===e?a.push(e+"3d("+this[e]+",1)"):b&&"translate"===e?a.push(e+"3d("+this[e]+",0)"):a.push(e+"("+this[e]+")"));return a.join(" ")}};c.fn.transition=c.fn.transit=function(b,a,e,j){var f=this,l=0,h=!0;"function"===typeof a&&(j=a,a=void 0);"function"===typeof e&&(j=e,e=void 0);"undefined"!==typeof b.easing&&(e=b.easing,delete b.easing);"undefined"!==typeof b.duration&&(a=b.duration,delete b.duration);"undefined"!==typeof b.complete&&
(j=b.complete,delete b.complete);"undefined"!==typeof b.queue&&(h=b.queue,delete b.queue);"undefined"!==typeof b.delay&&(l=b.delay,delete b.delay);"undefined"===typeof a&&(a=c.fx.speeds._default);"undefined"===typeof e&&(e=c.cssEase._default);var a=n(a),g=p(b,a,e,l),m=c.transit.enabled&&k.transition?parseInt(a,10)+parseInt(l,10):0;if(0===m)return o(f,h,function(a){f.css(b);j&&j();a()}),f;var q={},s=function(a){var e=!1,n=function(){e&&f.unbind(d,n);0<m&&f.each(function(){this.style[k.transition]=
q[this]||null});"function"===typeof j&&j.apply(f);"function"===typeof a&&a()};0<m&&d&&c.transit.useTransitionEnd?(e=!0,f.bind(d,n)):window.setTimeout(n,m);f.each(function(){0<m&&(this.style[k.transition]=g);c(this).css(b)})};o(f,h,function(b){var a=0;"MozTransition"===k.transition&&25>a&&(a=25);window.setTimeout(function(){s(b)},a)});return this};c.transit.getTransitionValue=p})(jQuery);(function(c,a){function g(j,c,f,h,m){var d=a("#"+j),b=a("#"+f),j=b.offset(),f=d.offset(),i=d.position(),c=a("#"+c).offset();d.appendTo("body");d.css({zIndex:h,position:"absolute",left:f.left,top:f.top});d.animate({left:"+="+(j.left-c.left)+"px",top:"+="+(j.top-c.top)+"px"},m,function(){b.prepend(d);d.css({zIndex:1,left:i.left,top:i.top})})}function o(a){var c=a.clone();c.attr("id",a.attr("id")+"_clone");c.insertAfter(a);c.css("visibility","hidden");return c}function q(a){var c=a.offset(),f=a.attr("sol");
f&&(c.left-=f);if(f=a.attr("sot"))c.top-=f;a.css({zIndex:4,position:"absolute",margin:0,left:c.left,top:c.top});a.appendTo("body")}function p(c){var f=c.obj,h=c.targetObj,k=c.speed,m=c.doAfter,d=c.handler,c=c.scale;"restore"==m?h=a("#"+f.attr("id")+"_clone"):(f.attr("om",f.css("margin")),o(f));q(f);var b=h.offset();f.offset();var i=f.css("zIndex");f.css("zIndex","5");var e=0,g=0;c&&1>c&&(e=0.5*f.width()*(1-c),g=0.5*f.height()*(1-c),b.left-=e,b.top-=g);f.transition({left:b.left,top:b.top,scale:c},
k,function(){f.css("zIndex",i);if(m=="append"){h.append(f);f.css({position:"",left:0,top:0,"margin-left":-e,"margin-top":-g});f.attr("sol",e);f.attr("sot",g)}else if(m=="restore"){f.insertBefore(h);var a=f.attr("om");a!=null&&f.css("margin",a);f.css({position:"",left:0,top:0});h.remove();f.attr("sol","");f.attr("sot","")}d!=null&&d()})}function h(c,h){if(!(1>a("#intro").css("opacity"))){var l,k=null!=c.attr("service"),g=c.attr("name"),d=window[g+"Sync"],b=a("#div"+g),i="append",e;if(k)i="restore",
e=c.attr("service"),"leftService"==e?(f.leftSide=null,a.cookie("left",null)):"rightService"==e&&(f.rightSide=null,a.cookie("right",null)),c.attr("service",null),b.hide();else{if(null==f.leftSide)e="leftService",f.leftSide=d,f.leftName=g,a.cookie("left",c.attr("id"));else if(null==f.rightSide)e="rightService",f.rightSide=d,a.cookie("right",c.attr("id"));else return;c.attr("service",e);l=a("#"+e);a("#"+e+"Text").hide()}p({obj:c,targetObj:l,speed:h?0:"fast",doAfter:i,handler:function(){k?a("#"+e+"Text").show():
(b.show(),b&&a("#"+l.attr("id")+"Login").append(b),d.login())}})}}var f=c.v=c.v||{leftSide:null,rightSide:null,leftname:null,leftData:null,rightData:null,useFakeData:!1,doUpload:!0,albumOrderLeft:[],albumOrderRight:[]};c.clearTable=function(){a.each(a("#tableLeft div"),function(c,f){a(f).remove()});a.each(a("#tableRight div"),function(c,f){a(f).remove()})};c.toggle=function(c){c=a(c);"checked"==c.attr("checked")?(c.attr("checked",null),c.find(".labelbg").css("background-color","rgba(0,0,0,0.6)")):
(c.attr("checked","checked"),c.find(".labelbg").css("background-color","red"))};c.doCompare=function(){if(null!=f.leftData&&null!=f.rightData){a(".loading").hide();c.clearTable();a("#loadingLeft").fadeOut();a("#loadingRight").fadeOut();a("#divGoogle").fadeOut();a("#divFacebook").fadeOut();var j=f.leftData,h=f.rightData,l=a("#tableLeft");a("#tableRight");a.each(j,function(c,g){var d=!1;a.each(h,function(a,b){g.name==b.name&&(g.count!=b.count?(g.isPartial=!0,g.fbId=b.id):(d=!0,g.found=!0,b.found=!0))});
var b='<div id="tableRowLeft'+c+'" class="tableRow"';j==f.leftData&&(b+=' onclick="photoSync.toggle(this);"');b+='><img class="tableRowImg" id="img'+c+'" src="'+g.thumb+'"</img><div class="labelbg"><label class="tableRowLabel" id="title'+c+'">'+g.name+"</label></div></div>";d?a("#tableRight").append(b):l.append(b)})}};c.uploader=function(f,h,g,k,m,d,b){if(!g||k>=g.length)a("#"+b+f).slideUp("slow",function(){a(this).remove()}),setTimeout(function(){var b=a("#img_"+f+"_0");b.css("zIndex",800);b.animate({width:"160px",
height:"160px"},1E3);a("#rowOn"+f).find(".labelbg").css("zIndex",1E3);for(b=1;b<g.length;b++){var c=a("#img_"+f+"_"+b);a("#img_"+f+"_"+b).animate({left:"+=160px",top:"+=160px"},1E3,function(){c.remove()})}},1E3),f==m[m.length-1]&&m.pop();else if(k==g.length-1&&f!=m[m.length-1])setTimeout(function(){c.uploader(f,h,g,k,m,d,b)},4E3);else{var i=g[k];i.isSynced?c.uploader(f,h,g,k+1,m,d,b):d.uploadImage(h,i,function(){c.animateImage(f,k,1E3,b);c.uploader(f,h,g,k+1,m,d,b)})}};c.animateImage=function(a,c,
f,h){g("img_"+a+"_"+c,h+a,"rowOn"+a,500+c,f)};c.animateImages=function(f,h,g,k){var m=h.length,d=Math.floor(4*Math.sqrt(m)/3),b=Math.floor(Math.sqrt(19200/m));a.each(h,function(i){if(0==i){var e=f.find("img");e.attr("id","img_"+g+"_"+i);e.animate({width:b+"px",height:b+"px"},"normal")}else e=a(document.createElement("img")),e.attr("id","img_"+g+"_"+i),e.attr("src",h[i].minThumb),e.css({position:"absolute",left:Math.floor(i%d)*b+"px",top:Math.floor(i/d)*b+"px",width:b+"px",height:b+"px",opacity:"0"}),
f.prepend(e),e.animate({opacity:"1"},"slow");h[i].isSynced&&c.animateImage(g,i,0,k)})};c.sync=function(){(function(h,g,l,k,m,d){a.each(h.children("div"),function(b,i){var e=a(i);if("checked"==e.attr("checked")){c.toggle(e);var h=i.id.replace(d,"");e.css("background-color","rgba(0,0,0,0.6)");e.position();e.offset();var j=e.clone().prependTo("#tableRight");j.attr("id","rowOn"+h);var o=j.width();j.css({width:"0"});j.animate({opacity:1,width:o+"px"},"normal");j.find("img").remove();m.push(h);g.getImages(h,
function(b){var i=a("#title"+h).html();k[h].isPartial?(console.log("Partial: ",f.leftData[h].fbId),l.getImages(k[h].fbId,function(a){for(var i=0;i<a.length;i++)for(var j=0;j<b.length;j++)-1!=a[i].name.indexOf(b[j].link)&&(b[j].isSynced=!0,console.log("already synced: "+j));f.doUpload&&(c.animateImages(e,b,h,d),c.uploader(h,k[h].fbId,b,0,m,l,d))})):f.doUpload&&l.createAlbum(i,k[h].link,function(a){c.animateImages(e,b,h);c.uploader(h,a,b,0,m,l,d)});f.doUpload||c.animateImages(e,b,h,d)})}})})(a("#tableLeft"),
f.leftSide,f.rightSide,f.leftData,f.albumOrderLeft,"tableRowLeft")};c.onLoad=function(){a(".loading").show();a("#leftServiceName").html(f.leftName);f.leftSide.load(function(a){f.leftData=a;f.isLeftReady=!0;c.doCompare()});f.rightSide.load(function(a){f.rightData=a;f.isRightReady=!0;c.doCompare()})};c.openIntro=function(){a("#intro").show();a("#intro").animate({opacity:1},"slow");p({obj:a("#logo2"),speed:"slow",doAfter:"restore"});p({obj:a("#introServicesSelectedBox"),speed:"slow",scale:"1",doAfter:"restore",
handler:function(){a("#introServicesLogin").show()}});setTimeout(function(){a("#introServicesSelectedBox").css({height:"+=30px"});a(".service").animate({borderWidth:"3px"},0)},200)};c.closeIntro=function(){a("#introServicesLogin").hide();a(".service").animate({borderWidth:"0px"},"slow");p({obj:a("#logo2"),targetObj:a("#logo"),speed:"slow",doAfter:"append"});p({obj:a("#introServicesSelectedBox"),targetObj:a("#services"),speed:"slow",scale:"0.6",doAfter:"append"});a("#intro").animate({opacity:0},"slow",
function(){a("#intro").hide()});setTimeout(function(){a("#introServicesSelectedBox").css({height:"-=30px"})},200)};c.highlight=function(a){a.stop();a.css({backgroundColor:"#f22"}).animate({backgroundColor:"rgba(0,0,0,0)"},2E3)};a(window).bind("load",function(){a("#intro").css("opacity","1");f.useFakeData?(a("#serviceGoogle").remove(),a("#serviceFacebook").remove()):(a("#serviceFakeLeft").remove(),a("#serviceFakeRight").remove());a("#divButtonSync").click(function(){c.sync()});h(a("#serviceGoogle"),
!0);h(a("#serviceFacebook"),!0);a("#goButton").click(function(){f.leftSide?f.leftSide.v.loggedIn||f.leftSide.highlight():c.highlight(a("#leftService"));f.rightSide?f.rightSide.v.loggedIn||f.rightSide.highlight():c.highlight(a("#rightService"));if(f.leftSide&&f.rightSide&&f.leftSide.v.loggedIn&&f.rightSide.v.loggedIn){c.closeIntro();c.onLoad()}});a("#services").click(function(){c.openIntro()})});a(function(){})})(window.photoSync=window.photoSync||{},jQuery);(function(c,a,g){function o(c){a("#loadingLeft").fadeIn();p(h.googleId,function(h,g){picasaData=g;a("#googleProfileImage").attr("src",h.thumbnail);c(picasaData,h.thumbnail)})}function q(c,j){var g;g="https://picasaweb.google.com/data/feed/api/user/default/albumid/:album_id?access_token=:access_id&alt=json&kind=photo&hl=en_US&imgmax=800&fields=entry(title,content,link,gphoto:numphotos,media:group(media:content,media:thumbnail,media:description))".replace(/:album_id/,c).replace(/:access_id/,h.googleId);
var l=null,k=[];a.getJSON(g,function(c){a.each(c.feed.entry,function(c,b){l=b.media$group.media$content[0];l.large=b.content.src;l.title=b.title.$t;l.description=b.media$group.media$description.$t;l.thumbs=[];a.each(b,function(b,c){if(a.isArray(c))for(link in c)"alternate"==c[link].rel&&(l.link=c[link].href)});var f=1E4,e="";a.each(b.media$group.media$thumbnail,function(a,b){b.width<f&&(f=b.width,e=b.url);l.thumbs.push(b)});l.minThumb=e;k.push(l)});j(k)})}function p(c,h){var g;g="https://picasaweb.google.com/data/feed/api/user/default?access_token=:user_id&alt=json&kind=album&hl=en_US&access=visible&fields=gphoto:nickname,gphoto:thumbnail,entry(id,link,gphoto:numphotos,media:group(media:content,media:description,media:keywords,media:title,media:thumbnail))".replace(/:user_id/,
c);a.getJSON(g,function(c){var f={nickname:c.feed.gphoto$nickname.$t,thumbnail:c.feed.gphoto$thumbnail.$t},g=null,d=[];a.each(c.feed.entry,function(b,c){g={id:c.id.$t.split("?")[0].split("albumid/")[1],count:c.gphoto$numphotos.$t,name:c.media$group.media$title.$t,description:c.media$group.media$description.$t,thumb:c.media$group.media$thumbnail[0].url};a.each(c,function(b,c){if(a.isArray(c))for(link in c)"alternate"==c[link].rel&&(g.link=c[link].href)});d.push(g)});h(f,d)})}var h=c.v=c.v||{googleId:"",
picasaData:{},loggedIn:!1};c.login=function(){var f,j="https://accounts.google.com/o/oauth2/auth?scope="+encodeURIComponent("https://picasaweb.google.com/data/")+"&redirect_uri="+encodeURIComponent("http://picopy.co")+"&response_type=token&client_id=905742775678.apps.googleusercontent.com";a("#googleLogin").click(function(){window.location=j});a("#googleLogout").click(function(){a.cookie("googleLogin",null);h.loggedIn=!1;transitionDiv("divGoogleLoggedIn","divGoogleLogin",function(){})});(f=getHashByName("access_token"))?
(h.googleId=f,a.cookie("googleLogin",h.googleId),document.location.href="#"):h.googleId=a.cookie("googleLogin");h.googleId?(f="https://www.googleapis.com/oauth2/v1/tokeninfo?access_token="+h.googleId,a.ajax({url:f,dataType:"jsonp",success:function(f){if(f.error){h.googleId=g;a.cookie("googleLogin",h.googleId);h.loggedIn=false;transitionDiv("divGoogleLoggedIn","divGoogleLogin",function(){})}else{h.loggedIn=true;a("#googleLogin").remove("highlightError");transitionDiv("divGoogleLogin","divGoogleLoggedIn",
function(){});c.createAlbum("asdf","asdf")}},failure:function(a){console.log("Failure in google verification:");console.log(a)}})):(h.loggedIn=!1,transitionDiv("divGoogleLoggedIn","divGoogleLogin",function(){}))};c.load=function(a){o(a)};c.logout=function(){};c.onLogin=function(){};c.createAlbum=function(){};c.uploadImage=function(){};c.getImages=function(a,c){q(picasaData[a].id,function(a){c(a)})};c.highlight=function(){a("#googleLogin").addClass("highlightError")}})(window.GoogleSync=window.GoogleSync||
{},jQuery);(function(c,a){function g(a){FB.api("/me/albums?limit=25&offset="+a,function(c){if(0==c.data.length)p.onLoadComplete(p.albums);else{for(var j=null,n=0;n<c.data.length;n++)j=c.data[n],j={id:j.id,count:j.count,name:j.name,description:j.description,thumb:"https://graph.facebook.com/"+j.id+"/picture&type=album&access_token="+p.access_token,link:j.link},p.albums.push(j);g(a+25)}})}function o(a,c,g,n){FB.api("/"+c+"/photos?limit=25&offset="+g,function(l){if(0==l.data.length)n(a);else{for(var k=0;k<l.data.length;k++)a.push(l.data[k]);
o(a,c,g+25,n)}})}function q(){FB.init({appId:"122592874445629",status:!0,cookie:!0,xfbml:!0});FB.getLoginStatus(function(h){"connected"===h.status?(p.access_token=h.authResponse.accessToken,a(".fb_button_text").text("Facebook Logout"),c.onLogin()):(a(".fb_button_text").text("Facebook Login"),transitionDiv("divFacebookLoggedIn","divFacebookLogIn"))})}var p=c.v=c.v||{onLoadComplete:{},albums:[],accessToken:{},loggedIn:!1};c.login=function(){addScript("http://connect.facebook.net/en_US/all.js",q)};c.load=
function(a){p.onLoadComplete=a;g(0)};c.logout=function(){FB.logout(function(){a(".fb_button_text").text("Facebook Login");p.loggedIn=!1;transitionDiv("divFacebookLoggedIn","divFacebookLogIn",function(){a("#facebookProfileImage").attr("src",null)})})};c.onLogin=function(){FB.getLoginStatus(function(c){"connected"===c.status?(a(".fb_button_text").text("Facebook Logout"),a("#loadingRight").fadeIn(),p.loggedIn=!0,a(".fb_button").removeClass("highlightError"),transitionDiv("divFacebookLogIn","divFacebookLoggedIn",
function(){})):(p.loggedIn=!1,transitionDiv("divFacebookLoggedIn","divFacebookLogIn",function(){a("#facebookProfileImage").attr("src",null)}))})};c.createAlbum=function(a,c,g){FB.api("/me/albums/","post",{name:a,description:"Original: "+c},function(a){!a||a.error?console.log("Facebook: Error creating album"):g(a.id)})};c.uploadImage=function(a,c,g){FB.api("/"+a+"/photos","post",{message:c.description+"\n\nOriginal: "+c.link,url:c.large},function(a){!a||a.error?(console.log("Facebook: Error uploading image"),
console.log(a.error)):g()})};c.getImages=function(a,c){o([],a,0,c)};c.highlight=function(){a(".fb_button").addClass("highlightError")}})(window.FacebookSync=window.FacebookSync||{},jQuery);
